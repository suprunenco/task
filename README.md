# task

В приложении используется фреймворк [Quasar](https://quasar.dev/) для отображения элементов управления. Все языкозависимые сообщения выводятся через [vue-i18n](https://vue-i18n.intlify.dev/). Для загрузки данных используется [axios](https://axios-http.com/). Для управления состоянием используется [Pinia](https://pinia.vuejs.org/).

Компонент приложения [App](./src/App.vue) содержит щаблон вывода и блок `router-view`, в который загружаются компоненты в зависимости от маршрута. Корневой [маршрут](./src/router/index.js) указывает на компонент [HomeView](./src/views/HomeView.vue), в котором последовательно вызываются компоненты:

* управления курсом доллара [CurrencyControl](./src/components/CurrencyControl.vue)
* управления циклической загрузкой данных [LoadControl](./src/components/LoadControl.vue)
* отображения каталога [Catalogue](./src/components/Catalogue.vue)
* отображения корзины [Cart](./src/components/Cart.vue)
* отображения каталога в режиме редактирования Catalogue

Ниже кратко описан каждый из этих компонентов.

## Компонент управления курсом доллара [CurrencyControl](./src/components/CurrencyControl.vue)

Компонент позволяет получать курс доллара ЦБ и задавать курс вручную в диапазоне от 20 до 80 ₽ за доллар. Для хранения данных используется хранилище [`currensyStore`](./src/stores/currency.js). Значение, полученное от ЦБ, сохраняется в `localStorage` и загружается с сайта ЦБ не чаще, чем раз в сутки.

## Компонент управления циклической загрузкой данных [LoadControl](./src/components/LoadControl.vue)

Компонент позволяет включать и выключать загрузку данных о товарах раз в 15 с. По умолчанию циклическая загрузка выключена. Выбранное значение не сохраняется и теряется при перезагрузке компонента. Компонент использует хранилище [`goodsStore`](./src/stores/goods.js) для вызова метода загрузки товаров.

## Компонент отображения и редактирования каталога [Catalogue](./src/components/Catalogue.vue)

Компонент позволяет отображать и редактировать свойства товаров. Вариант регулируется передачей в компонент свойства `edit`. В реальном проекте такой вариант использовать было бы нецелесообразно, но в данном случае вполне уместно. В режиме отображения при установке компонента происходит загрузка товаров из файлов json с помощью вызова метода `loadGoods` хранилища [`goodsStore`](./src/stores/goods.js). В хранилище описан геттер `goodsByCategories`, возвращающий обеъкт, в котором категории и товары организованы в иерархический список.

Для каждой категории в списке, полученном через геттер `goodsByCategories` вызывается компонент [`GoodsCategory`](./src/components/GoodsCategory.vue), в который через свойства передаются данные категории и товаров в ней, описаны обработчики испускаемых событий (для редактирования данных) и так же, как и в компоненте `Catalogue`, передаётся свойство `edit`.

Компонент `GoodsCategory` отображает расширяемую по клику область (по умолчанию ракрыта), в которой содержится название категории (в режиме отображения) или поле для редактирования названия категории (в режиме редактирования). Для возможности изменения данных переданное в компонент свойство Название категории отображается на вычислимое свойство, при изменении котрого в родительский компонент испускается соответствующее событие.

Для каждого товара в списке, переданном через свойство `goods`, вызывается компонент [`GoodsItem`](./src/components/GoodsItem.vue), который отображает название, количество, цену товара (в рублях) и кнопку «Добавить в корзину» (в режиме отображения) и поля для редактирования названия, количества и цены (в режиме редактирования). Для возможности изменения данных переданные в компонент свойства отображается на вычислимые свойства, при изменении котрых в родительский компонент испускаются соответствующие события. При нажатии кнопки «Добавить в корзину» опосредованно вызывается метод `addGood` хранилища [`cartStore`](./src/stores/cart.js).

## Компонент отображения корзины [Cart](./src/components/Cart.vue)

Компонент отображает список товаров, добавленных в корзину. Для хранения списка товаров используется хранилище [`cartStore`](./src/stores/cart.js). Список товаров так же сохраняется в `localStorage` для сохранения данных при перезагрузке страницы.

Для каждого товара в списке вызывается компонент [`GoodsItemToCart`](./src/components/GoodsItemToCart.vue), в который через свойство передаётся `id` товара. Компонент отображает название товара, его цену (в рублях), поле и кнопки для изменения количества, стоимость (в рублях), кнопку для удаления товара из корзины. Данные о товаре, его цене и стоимости представлены вычислимыми свойствами. Обработчики событий нажатия на кнопки вызывают соответствующие методы хранилища [`cartStore`](./src/stores/cart.js).

Итоговые значения в нижней строке таблицы корзины обеспечиваются соответствующими геттерами хранилища [`cartStore`](./src/stores/cart.js).

Кнопка перехода в корзину в хедере страницы реализуется при помощи компонента Teleport.

## Project Setup

```sh
npm install
```

### Compile and Hot-Reload for Development

```sh
npm run dev
```

### Compile and Minify for Production

```sh
npm run build
```
